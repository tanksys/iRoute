version: 1.0
provider:
  name: openfaas
  gateway: http://127.0.0.1:31112
functions:
  finra-entry:
    lang: python3-ipc-entry
    handler: ./finra-entry
    image: tjulym/finra-entry:ipc
    environment:
      write_timeout: 1m
      read_timeout: 1m
      exec_timeout: 1m
      handler_wait_duration: 1m
    annotations:
      com.openfaas.volume.shared.mountPath: "/home/app/ipc"
      com.openfaas.volume.shared.hostPath: "/mnt/finra"
    constraints:
      - "kubernetes.io/hostname=${TARGET_NODE}"